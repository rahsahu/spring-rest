

name: var experiment

on:
  workflow_dispatch:
    inputs:
      var:
        description: 'Description for var'
        required: false
        default: 'false'
        
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  var-experiment:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Print Triggering Event
      run: |
          echo "Triggered by ${{ github.event_name }}"    

    - name: Check if not triggered by workflow_dispatch set false
      id: updated_input
      run: |
          if [[ ${{ github.event_name }} != 'workflow_dispatch' ]]; then
            echo "This workflow was not triggered by workflow_dispatch"
            echo "name=var=false" >> $GITHUB_OUTPUT
          else
            echo "This workflow was triggered by workflow_dispatch"
            echo "var=${{ inputs.var }}" >> $GITHUB_OUTPUT
          fi    
          
    - name: Print Run Command
      run: |
          echo "The input run command is: ${{ inputs.var }}"
          echo "The input run command is: ${{ steps.updated_input.outputs.var }}"
      
